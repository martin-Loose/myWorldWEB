<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                    template="../../../resources/templates/users/usersTemplate.xhtml"
                    xmlns:h="http://xmlns.jcp.org/jsf/html">
        <ui:define name="content" >
            <h:head>
                <!--        <meta http-equiv="refresh" content="5"/>-->


            </h:head>
            <h:body style="height: 100vH;" onload="#{chatMessageService.setChatID(chatroomService.selectedChatroom.id)}">
                <div class="sidebar" style="height: auto;width: auto;">
                    <a class="active" href="/myWorld/secured/user/users/userIndex.xhtml">Center</a>
                    <a href="/myWorld/secured/user/chat/chatRoomList.xhtml">Chats</a>
                    
                </div>
                <div class="myContent" style="overflow: auto;background-color: #f5d76e;padding-left: 5px;">
                    <h:form><h:outputLabel value="#{chatroomService.selectedChatroom.name}"/><br/>
                        <h:inputText value="#{createChatMessageController.myMessage}" size="200" style="width: 300px;"
                                     validatorMessage="illegal sign" a:placeholder="your Comment max 200">
                            <f:validateRegex pattern="[a-zA-Z0-9 ,.-]*" />
                        </h:inputText>
                        <h:commandButton value="write" action="#{createChatMessageController.writeMessage(loginControll.authenticatedUser.username,chatroomService.selectedChatroom.id)}"/>
                    
                    <ui:repeat value="#{chatMessageService.thisRoom}" var="item">
                       
                         <hr/><h:outputLabel value="#{item.senderName} wrote at "> 
                              <h:outputText value="#{item.wann}">
                                  <f:convertDateTime pattern="HH:mm" /></h:outputText>
                              </h:outputLabel><hr/>
                         <h:inputTextarea value="#{item.chatMessage}" cols="50" rows="4" 
                                          style="overflow: auto;" readonly="true"/>   
                           
                      
                    </ui:repeat></h:form>  
                </div>
                   
            </h:body>
        </ui:define>
    </ui:composition>

</html>

