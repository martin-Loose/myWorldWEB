<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta http-equiv="refresh" content="10"/>
    </h:head>
    <h:body>
        <ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                        template="../../../resources/templates/users/usersTemplate.xhtml"
                        xmlns:h="http://xmlns.jcp.org/jsf/html">
          <ui:define name="content">
 <div class="sidebar" style="height: auto;width: auto;">
  <a class="active" href="/myWorld/secured/user/users/userIndex.xhtml">Center</a>
  <a href="/myWorld/secured/user/messages/messagesIndex.xhtml">News</a>
  <a href="/myWorld/secured/user/buddies/buddiesIndex.xhtml">Buddy</a>
  <a href="/myWorld/secured/user/lists/listsIndex.xhtml">Lists</a>  
</div>
              <div class="myContent" style="height: 75vH;">
                    <h:form id="userTable" class="card">
                                    <div>
                                        <h:outputLabel value="Filter List"/>
                                        <h:inputText value="#{newChatroomService.searchString}" a:placeholder="Filter List by Roomname contains searchString"/>
                                        <h:commandButton value="Search" action="#{newChatroomService.findbyStart}"> 
                                            <f:ajax execute="@form"  render="userTable"/>
                                        </h:commandButton>
                                        </div>
<h:dataTable value="#{newChatroomService.myNewListOfRooms}" var="item" styleClass="employeeTable"
              headerClass="employeeTableHeader"
              rowClasses="employeeTableOddRow,employeeTableEvenRow" footerClass="employeeTableHeader">
<h:column>
 <f:facet name="header">
 <h:outputText style="width: 100%;" value="Name"/><br/>
 </f:facet>
<h:outputText value="#{item.name}"/>
 </h:column>
    <h:column>
 <f:facet name="header">
 <h:outputText style="width: 100%;" value="public"/><br/>
 </f:facet>
        <h:outputText value="#{item.isPublic}"/>
 </h:column>
    <h:column>
 <f:facet name="header">
 <h:outputText style="width: 100%;" value="private"/><br/>
 </f:facet>
<h:outputText value="#{item.isPrivate}"/>
 </h:column>
 <h:column>
 <f:facet name = "header">Details</f:facet>
<h:link styleClass="button" type="button/submit" outcome="publicChatroomDetails.xhtml" value="view publicRoom"
        includeViewParams="true" target="_blank" style="color: #000000;" rendered="#{item.isPublic}">  
<f:param  name="chatName" value="#{item.name}" />  
<f:param  name="chatID" value="#{item.id}" />  
</h:link>
 <h:link styleClass="button" type="button/submit" outcome="privateChatroomDetails.xhtml" value="view privateRoom"
         includeViewParams="true" target="_blank" style="color: #000000;" rendered="#{item.isPrivate}">  
<f:param  name="chatName" value="#{item.name}" />  
<f:param  name="chatID" value="#{item.id}" />  
</h:link>
</h:column>
     <h:column>
 <f:facet name = "header">Settings</f:facet>
<h:link styleClass="button" type="button/submit" outcome="editChatRoom.xhtml" value="edit"
   includeViewParams="true" target="_blank" style="color: #000000;"  rendered="#{item.creatorID == loginControll.authenticatedUser.id}">  
<f:param  name="chatName" value="#{item.name}" />  
<f:param  name="chatID" value="#{item.id}" /> 
<f:param name="myID" value="#{loginControll.authenticatedUser.id}"/>
</h:link>
</h:column>
    <h:column >
 <f:facet name = "header" >delete</f:facet>
 <h:commandButton value="delete" rendered="#{item.creatorID == loginControll.authenticatedUser.id}"
                  action="#{updateChatroomSettingsController.removeRoom(item.id)}"/>
</h:column>
<f:facet name="footer">
<h:outputLabel value="#{newChatroomService.myNewListOfRooms.size()} Chatrooms found"/>
</f:facet>
</h:dataTable>
</h:form> 
</div>

            </ui:define>
        </ui:composition>
    </h:body>
</html>


